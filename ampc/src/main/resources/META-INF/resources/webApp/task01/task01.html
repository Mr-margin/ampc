<!DOCTYPE html>
<html>
<head lang="en">
  <meta charset="UTF-8">
  <title></title>
  <link href="../../css/icons.css" rel="stylesheet" />
  <link href="../../css/plugins/sprflat-theme/jquery.ui.all.css" rel="stylesheet" />
  <link href="../../css/bootstrap.min.css" rel="stylesheet" />
  <!--<link rel="stylesheet" href="../../css/plugins/iCheck/custom.css"/>-->
  <link rel="stylesheet" href="../../js/plugins/forms/icheck/flat/_all.css"/>
  <link href="../../css/main.css" rel="stylesheet" />
</head>
<body>

  <div class="content">
    <div class="row">
      <div class="col-md-6">
        <div class="panel panel-default plain ">
          <!-- Start .panel -->
          <div class="panel-heading white-bg">
            <div class="col-md-6">
              <h4 class="panel-title">任务列表<i class="im-file3"></i></h4>
            </div>
            <div class="col-lg-6">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="输入任务名称或字段">
                <span class="input-group-btn">
                  <button class="btn btn-default" type="button" onclick="search('rw')"><i class="ec-search"></i></button>
                </span>
              </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
          </div>
          <div class="panel-body" style="padding:0px;">
            <table class="table table-hover rwTable" >
              <thead>
              <tr>
                <th class="per5">
                  <label class="checkbox">
                    <input class="checkedAll" type="checkbox" name="rw">
                  </label>
                </th>
                <th>任务列表</th>
                <th>模拟范围</th>
                <th>清单</th>
              </tr>
              </thead>
              <tbody>
                <!--<tr>-->
                  <!--<td>-->
                    <!--<label class="checkbox">-->
                      <!--<input type="checkbox" name="rw" value="1">-->
                    <!--</label>-->
                  <!--</td>-->
                  <!--<td><a href="#">一月上旬排放量调查</a><br><a style="font-size:12px; color:#C5C5C5;">创建时间：2017/02/17  12:32:49</a></td>-->
                  <!--<td>346-范围29<br><a style="font-size:12px; color:#C5C5C5;">起止日期：2017/02/17-2017/02/28</a></td>-->
                  <!--<td>2530-清单2</td>-->
                <!--</tr>-->
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="panel panel-default plain " >
          <!-- Start .panel -->
          <div class="panel-heading white-bg">
            <div class="col-md-6">
              <h4 class="panel-title">情景列表<i class="im-file3"></i></h4>
            </div>
            <div class="col-lg-6">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="输入情景名称或字段">
                <span class="input-group-btn">
                  <button class="btn btn-default" type="button" onclick="search('qj')"><i class="ec-search"></i></button>
                </span>
              </div><!-- /input-group -->
            </div><!-- /.col-lg-6 -->
          </div>
          <div class="panel-body" style="padding:0px; ">
            <table class="table table-striped qjTable">
              <thead>
              <tr>
                <th class="per5">
                  <label class="checkbox">
                    <input class="check-all" type="checkbox" name="qj">
                  </label>
                </th>
                <th>情景名称</th>
                <th style="text-align: center">操作</th>
                <th>情景状态</th>
                <th>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</th>
              </tr>
              </thead>
              <tbody>
              <!--<tr>-->
                <!--<td>-->
                  <!--<label class="checkbox">-->
                    <!--<input class="check" type="checkbox" name="qj">-->
                  <!--</label>-->
                <!--</td>-->
                <!--<td>-->
                  <!--<a href="#">二月下旬排放量调查</a><br>-->
                  <!--<a style="font-size:12px; color:#C5C5C5;">创建时间：2017/02/17  12:32:49</a><br/>-->
                  <!--<a style="font-size:12px; color:#C5C5C5;">起止日期：2017/02/17-2017/02/17</a>-->
                <!--</td>-->
                <!--<td class="text-center">-->
                  <!--<button class="btn btn-primary mb10">启动</button>-->
                  <!--<button class="btn btn-primary mb10">终止</button>-->
                  <!--<br/>-->
                  <!--<button class="btn btn-primary">续跑</button>-->
                  <!--<button class="btn btn-primary">暂停</button>-->
                <!--</td>-->
                <!--<td style="line-height: 70px">-->
                  <!--<a hrea="#">执行完毕</a>-->
                <!--</td>-->
                <!--<td style="line-height: 70px">-->
                  <!--<button class="btn btn-primary">效果评估</button>-->
                <!--</td>-->
              <!--</tr>-->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>



</body>
<script src="../../js/jquery.min.js"></script>
<script>
  window.jQuery || document.write('<script src="../../js/jquery.min.js">\x3C/script>')
</script>
<script src="../../js/jquery-ui-1.10.4.min.js"></script>
<script src="../../js/plugins/forms/icheck/jquery.icheck.js"></script>
<script src="../../js/bootstrap.min.js"></script>
<script>

  var parameterPar = {
    token:'',
    data:{}
  };
  var rwMap,qjMap;

  $(document).ready(function(){
    refreshIcheck();
    initialize();





  });

  function refreshIcheck(){
    var callbacks_list = $('.rwTable ul');
    $('body input').on('ifCreated ifClicked ifChanged ifChecked ifUnchecked ifDisabled ifEnabled ifDestroyed', function(event){
      callbacks_list.prepend('<li><span>#' + this.id + '</span> is ' + event.type.replace('if', '').toLowerCase() + '</li>');
    }).iCheck({
      checkboxClass: 'icheckbox_flat-aero',
      radioClass: 'iradio_flat-aero',
      increaseArea: '20%'
    });
  }







  function initialize(){
    var parameter = {};
    var selectAjax = ajaxPost('rw.json',parameter);
    $.when(selectAjax).done(function(res){
        rwMap = res.data;
        var qjSelect = ajaxPost('qj.json',{});
        qjSelect.then(function(res){
          qjMap = res.data;
          for(var qj=0;qj<qjMap.rows.length;qj++){
            $('.qjTable tbody').append(setQJtr(qjMap.rows[qj]))
          }
          refreshIcheck();
        });
        for(var rw=0;rw<rwMap.rows.length;rw++){
          $('.rwTable tbody').append(setRWtr(rwMap.rows[rw]))
        }
        refreshIcheck();
      })
  }

  function ajaxPost(url,parameter){
    parameterPar.data = parameter;
    return $.ajax({
      url: url,//请求地址
      type: "GET",
      async:true,
      dataType: 'JSON',
      data: parameterPar
    })

  }

  function getParameter(){

  }

  function setRWtr(rw){
    return '<tr>'+
        '<td>'+
        '<label class="checkbox">'+
        '<input type="checkbox" name="rw" value="'+ rw.missionId +'">'+
        '</label>'+
        '</td>'+
        '<td><a href="#">'+ rw.missionName +'</a><br><a style="font-size:12px; color:#C5C5C5;">创建时间：'+ rw.addTime +'</a></td>'+
        '<td>'+ rw.missionDomain +'<br><a style="font-size:12px; color:#C5C5C5;">起止日期：'+ rw.startDate+' - '+rw.endDate +'</a></td>'+
        '<td>'+ rw.esNationName +'</td>'+
        '</tr>'
  }

  function setQJtr(qj){
    return '<tr>'+
              '<td>'+
                '<label class="checkbox">'+
                '<input class="check" type="checkbox" name="qj" value="'+ qj.scenarinoId +'">'+
                '</label>'+
              '</td>'+
              '<td>'+
                '<a href="#">'+ qj.scenarinoName +'</a><br>'+
                '<a style="font-size:12px; color:#C5C5C5;">创建时间：'+ qj.addTime +'</a><br/>'+
                '<a style="font-size:12px; color:#C5C5C5;">起止日期：'+ qj.startDate+' - '+ qj.endDate +'</a>'+
              '</td>'+
                '<td class="text-center">'+
                '<button class="btn btn-primary mb10 mr10">启动</button>'+
                '<button class="btn btn-primary mb10">终止</button>'+
                '<br/>'+
                '<button class="btn btn-primary mr10">续跑</button>'+
                '<button class="btn btn-primary">暂停</button>'+
              '</td>'+
              '<td style="line-height: 70px">'+
                '<a hrea="#">'+ qj.scenarinoStatus +'</a>'+
              '</td>'+
              '<td style="line-height: 70px">'+
                '<button class="btn btn-primary">效果评估</button>'+
              '</td>'+
            '</tr>'
  }

</script>
</html>